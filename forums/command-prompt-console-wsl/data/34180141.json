{"id":"34180141","link":"https://wpdev.uservoice.com/forums/266908-command-prompt-console-windows-subsystem-for-l/suggestions/34180141--write-fails-to-write-non-ascii-characters-to-cons","title":"_write fails to write non-ASCII characters to console(fd=1,2) after setlocale(LC_ALL, \".utf-8\");","body":"SetConsoleOutputCP(65001); \n<br>_write(1, u8\"ENU中文\\n\", 10); // succeeds \n<br>setlocale(LC_ALL, \".utf-8\"); \n<br>_write(1, u8\"ENU中文\\n\", 10); // fails \n<br>---- \n<br>Probably because the internal function 'write_double_translated_ansi_nolock' assumes that setlocale only supports SBCS/DBCS but not UTF-8, which is no longer true in RS4. \n<br>The code file: C:\\Program Files (x86)\\Windows Kits\\10\\Source\\10.0.17134.0\\ucrt\\lowio\\write.cpp","votes":"1","user":"https://wpdev.uservoice.com/users/779835781-sss","datetime":"2018-05-07","comments":[]}